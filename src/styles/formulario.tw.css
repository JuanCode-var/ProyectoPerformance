/* ======================================================
   src/styles/formulario.tw.css
   ‚Äì Formulario con inputs/checkboxes refinados (Tailwind)
   ====================================================== */

/* 1) BASE: fondo y tipograf√≠a */
@layer base {
  body {
    @apply min-h-screen overflow-x-hidden font-sans text-slate-900;
    background:
      radial-gradient(circle at 25% 25%, rgba(59,130,246,.15) 0%, transparent 50%),
      radial-gradient(circle at 75% 75%, rgba(139,92,246,.12) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(20,184,166,.08) 0%, transparent 50%),
      linear-gradient(135deg, rgba(255,255,255,.95) 0%, rgba(240,248,255,.85) 50%, rgba(255,255,255,.9) 100%);
    background-attachment: fixed;
    line-height: 1.6;
    margin: 0;
  }

  body::before,
  body::after { content: ""; position: fixed; inset: 0; pointer-events: none; z-index: -1; }

  body::before {
    background:
      radial-gradient(circle at 25% 25%, rgba(59,130,246,.15) 0%, transparent 50%),
      radial-gradient(circle at 75% 75%, rgba(139,92,246,.12) 0%, transparent 50%),
      radial-gradient(circle at 50% 50%, rgba(20,184,166,.08) 0%, transparent 50%);
    animation: floatingOrbs 25s ease-in-out infinite;
  }
  body::after {
    background:
      linear-gradient(45deg, transparent 30%, rgba(255,255,255,.1) 50%, transparent 70%),
      linear-gradient(-45deg, transparent 30%, rgba(59,130,246,.05) 50%, transparent 70%);
    animation: shimmerOverlay 30s linear infinite;
  }
}

/* 2) COMPONENTES */
@layer components {
  /* --- Card contenedora --- */
  .form-card {
    @apply relative mx-auto my-12 max-w-[680px] overflow-hidden rounded-2xl
           border border-white/40 bg-white/70 p-12 shadow-2xl backdrop-blur-2xl sm:p-10;
  }
  .form-card::before {
    content: "";
    @apply absolute left-0 right-0 top-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-teal-500;
    background-size: 200% 100%;
    animation: gradientShift 3s ease-in-out infinite;
  }

  /* --- Encabezado --- */
  .form-header { @apply relative mb-12 text-center; }
  .logo-container { @apply relative mb-8 inline-block; }
  .logo-img-form { @apply max-h-16 w-auto drop-shadow-lg transition-transform duration-300 ease-out; }
  .logo-img-form:hover { @apply scale-[1.05] drop-shadow-xl; }

  .form-title {
    @apply relative mb-3 text-4xl font-extrabold tracking-tight
           text-transparent bg-clip-text bg-gradient-to-b from-black to-black/80 leading-tight;
  }
  .form-title::after {
    content: "";
    @apply absolute -bottom-3 left-1/2 h-1 w-24 -translate-x-1/2 rounded bg-gradient-to-r from-blue-500 to-purple-500;
    animation: titleUnderline 2.5s ease-in-out infinite;
  }

  .form-subtitle { @apply mt-6 text-lg font-medium text-black/90 leading-relaxed; }
  .brand-highlight { @apply bg-gradient-to-br from-blue-500 to-purple-500 bg-clip-text font-bold text-transparent; }

  /* --- Layout de campos --- */
  .modern-form { @apply flex flex-col gap-8; }
  .form-row { @apply grid gap-6; }           /* opcional: fila de grid */
  .form-row.two-col { @apply md:grid-cols-2; }
  .form-field { @apply relative space-y-2; }
  .form-field.full { @apply md:col-span-2; }

  /* --- Labels --- */
  .field-label { @apply mb-0 block text-[0.95rem] font-semibold text-slate-800; }
  .tests-label { @apply mb-6 inline-block text-xl font-bold text-slate-900 relative; }
  .tests-label::after {
    content: ""; @apply absolute -bottom-1 left-0 h-0.5 w-full rounded bg-gradient-to-r from-blue-500 to-transparent;
  }

  /* --- Inputs con icono --- */
  .input-container { @apply relative; }
  .input-icon { @apply pointer-events-none absolute left-4 z-10 text-[1.05rem] text-slate-400 transition-transform duration-200; }
  .peer:focus ~ .input-icon { @apply scale-110 text-blue-500; }

  .form-input {
    @apply w-full rounded-xl border bg-white/80 pl-12 pr-4 py-4 text-[0.975rem]
           font-medium text-slate-900 shadow-sm backdrop-blur
           transition-all duration-200 placeholder:text-slate-400
           border-slate-200 hover:border-slate-300
           focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10;
    transform: translateY(0);
  }
  .form-input:focus { transform: translateY(-1px); }

  /* Estados de input */
  .form-input[disabled],
  .form-input:disabled {
    @apply cursor-not-allowed bg-slate-100 text-slate-500 border-slate-200 shadow-none;
  }
  .form-input[aria-invalid="true"] {                   /* error accesible */
    @apply border-red-500 focus:border-red-500 focus:ring-red-500/10;
  }
  .form-input[data-state="valid"],
  .form-input.valid {
    @apply border-emerald-500 focus:border-emerald-500 focus:ring-emerald-500/10;
  }

  .field-hint  { @apply text-[0.825rem] text-slate-500; }
  .field-error { @apply mt-1 flex items-center gap-2 text-[0.875rem] font-semibold text-red-600; }
  .field-error::before { content: "‚ö†"; @apply text-base; }

  /* --- Checkboxes tipo ‚Äúcard‚Äù --- */
  .checkbox-group { @apply grid gap-5; }

  .checkbox-item {
    @apply relative cursor-pointer overflow-hidden rounded-2xl border-2 border-slate-100
           bg-white/70 p-6 shadow-sm backdrop-blur-lg transition-all duration-200;
  }
  .checkbox-item:hover { @apply -translate-y-[2px] shadow-lg border-blue-400/60; }
  .checkbox-item::before {
    content: ""; @apply absolute inset-y-0 left-[-100%] w-full bg-gradient-to-r from-transparent via-blue-500/10 to-transparent;
    transition: left .6s ease;
  }
  .checkbox-item:hover::before { left: 100%; }
  .checkbox-item:focus-within { @apply ring-2 ring-offset-2 ring-blue-500/30 ring-offset-white; }

  .checkbox-label { @apply relative z-10 flex w-full items-center justify-between gap-4; }
  .checkbox-label input[type="checkbox"] { @apply sr-only; }

  .checkbox-content { @apply flex flex-1 items-center gap-4; }
  .checkbox-icon {
    @apply flex h-12 w-12 items-center justify-center rounded-full
           bg-gradient-to-br from-blue-500 to-purple-500 text-white
           shadow-md transition-transform duration-200;
  }
  .checkbox-title { @apply text-[1rem] font-bold leading-snug text-slate-900; }
  .checkbox-hint  { @apply text-[0.85rem] text-slate-500; } /* opcional */

  .checkbox-check {
    @apply relative flex h-9 w-9 items-center justify-center overflow-hidden
           rounded-full border-4 border-slate-200 bg-white/80 text-slate-400
           transition-all duration-200;
  }

  /* Estado seleccionado (v√≠a clase .checked que ya tienes) */
  .checkbox-item.checked {
    @apply border-blue-500 bg-gradient-to-br from-blue-500/10 to-purple-500/5 shadow-xl;
  }
  .checkbox-item.checked .checkbox-icon { @apply scale-110 rotate-3 shadow-lg; }
  .checkbox-item.checked .checkbox-check {
    @apply scale-110 border-blue-500 bg-blue-500 text-white;
  }
  .checkbox-item.checked .checkbox-check::after {
    content: "‚úì"; @apply text-sm font-bold;
    animation: checkPop .25s ease-out;
  }

  /* Alternativa sin JS: si el input es hermano dentro del label */
  .checkbox-label input[type="checkbox"]:checked ~ .checkbox-check {
    @apply scale-110 border-blue-500 bg-blue-500 text-white;
  }
  .checkbox-label input[type="checkbox"]:checked ~ .checkbox-content .checkbox-icon {
    @apply scale-110 rotate-3;
  }

  /* --- Botones secundarios & alertas --- */
  .info-toggle {
    @apply inline-flex items-center gap-2 rounded-xl border border-blue-500/20 bg-blue-500/10
           px-3 py-2 text-[0.9rem] font-semibold text-blue-600 transition;
  }
  .info-toggle:hover { @apply -translate-y-[1px] border-blue-500 bg-blue-500/15 shadow-sm; }

  .api-info {
    @apply relative mt-4 overflow-hidden rounded-xl border-l-4 border-blue-500
           bg-gradient-to-br from-slate-50 to-slate-200 p-6 text-slate-600 shadow-sm;
  }
  .api-info::before { content: ""; @apply absolute left-0 top-0 h-full w-1 bg-gradient-to-b from-blue-500 to-purple-500; }
  .api-info p { @apply m-0 font-medium leading-relaxed; }

  .error-alert {
    @apply mt-6 flex items-center gap-3 rounded-xl border border-red-200 border-l-4 border-l-red-500
           bg-gradient-to-br from-red-50 to-red-100 p-5 font-semibold text-red-900 shadow-sm;
  }
  .error-alert::before { content: "üö®"; @apply text-xl; }

  /* --- Submit --- */
  .submit-button {
    @apply relative mt-2 box-border flex min-h-14 w-full items-center justify-center gap-3 overflow-hidden
           rounded-xl border-0 bg-gradient-to-br from-slate-900 to-slate-800 px-8 py-4
           text-lg font-bold text-white shadow-lg transition;
  }
  .submit-button:hover { @apply -translate-y-[2px] shadow-xl from-blue-600 to-purple-600; }
  .submit-button.loading { @apply cursor-not-allowed from-slate-400 to-slate-300 shadow-sm translate-y-0; }
  .submit-button::before {
    content: ""; @apply absolute inset-y-0 left-[-100%] w-full bg-gradient-to-r from-transparent via-white/20 to-transparent;
    transition: left .6s ease;
  }
  .submit-button:hover::before { left: 100%; }

  .loading-spinner { @apply h-5 w-5 flex-shrink-0 animate-spin rounded-full border-2 border-white/30 border-t-white; }
}

/* 3) RESPONSIVO */
@layer components {
  @media (max-width: 768px) {
    .form-card { @apply my-8 mx-4 rounded-xl p-8; }
    .form-title { @apply text-3xl; }
    .form-input { @apply py-3 pl-11 text-[0.95rem]; }
    .checkbox-item { @apply p-5; }
    .checkbox-icon { @apply h-11 w-11; }
    .checkbox-check { @apply h-8 w-8; }
  }
  @media (max-width: 480px) {
    .form-card { @apply m-4 p-6; }
    .form-title { @apply text-2xl; }
    .checkbox-content { @apply gap-3; }
    .checkbox-title { @apply text-[0.95rem]; }
    .submit-button { @apply min-h-12 px-6 py-3 text-base; }
  }
}

/* 4) ANIMACIONES */
@layer utilities {
  @keyframes floatingOrbs {
    0%,100% { opacity:.6; transform: translateY(0) rotate(0deg); }
    33%    { opacity:.8; transform: translateY(-10px) rotate(120deg); }
    66%    { opacity:.7; transform: translateY(5px) rotate(240deg); }
  }
  @keyframes shimmerOverlay {
    0% { transform: translateX(-100%) translateY(-100%); }
    100% { transform: translateX(100%) translateY(100%); }
  }
  @keyframes gradientShift {
    0%,100% { background-position: 0% 50%; }
    50%     { background-position: 100% 50%; }
  }
  @keyframes titleUnderline {
    0%,100% { opacity:.7; transform: translateX(-50%) scaleX(1); }
    50%     { opacity:1; transform: translateX(-50%) scaleX(1.1); }
  }
  @keyframes checkPop {
    0% { transform: scale(0) rotate(180deg); opacity:0; }
    100% { transform: scale(1) rotate(0deg); opacity:1; }
  }
  @keyframes errorSlide {
    from { opacity:0; transform: translateY(-10px); }
    to   { opacity:1; transform: translateY(0); }
  }
}

@layer components {
  /* Ritmo vertical un pel√≠n m√°s compacto */
  .modern-form { @apply gap-6; }
  .form-field  { @apply space-y-2; }
  .field-label { @apply mb-0; }

  /* Inputs: altura uniforme, foco sin glow exagerado, icono centrado */
  .input-container { @apply relative flex items-center; }
  .input-icon      { @apply absolute left-4 z-10 text-[1.125rem] text-slate-400; }

  .form-input {
    @apply h-12 w-full rounded-xl
           border border-slate-300 bg-white/80
           pl-11 pr-4 text-[15px] font-medium text-slate-900
           placeholder:text-slate-400
           shadow-sm backdrop-blur
           outline-none transition;
  }
  .form-input:focus {
    @apply border-blue-500 ring-2 ring-blue-500/20 shadow-md;
    transform: translateY(-1px);
  }

  /* Card/option del checkbox: contraste y feedback sutil */
  .checkbox-item {
    @apply rounded-2xl border-2 border-slate-200 bg-white/70 p-6
           shadow-sm backdrop-blur
           transition hover:-translate-y-0.5 hover:border-blue-500/60 hover:shadow-lg;
  }
  .checkbox-item.checked {
    @apply border-blue-500/70 bg-gradient-to-br from-blue-500/10 to-purple-500/5 shadow-xl;
  }

  /* Contenido interior y t√≠tulo un poco m√°s compacto */
  .checkbox-content { @apply flex flex-1 items-center gap-4; }
  .checkbox-title   { @apply text-[15px] font-bold leading-snug text-slate-900; }

  /* Icono principal a la izquierda */
  .checkbox-icon { @apply h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 text-white shadow-md
                           flex items-center justify-center transition-transform duration-300; }
  .checkbox-item:hover .checkbox-icon { @apply scale-110 rotate-3; }

  /* Badge/√≠cono a la derecha (el c√≠rculo azul con check) */
  .checkbox-right-badge { @apply inline-flex h-10 w-10 items-center justify-center rounded-full bg-blue-600 text-white shadow-md; }
  .checkbox-item.checked .checkbox-right-badge { @apply bg-blue-700; }

  /* Bot√≥n ‚Äú¬øQu√© es?‚Äù un poco m√°s discreto */
  .info-toggle { @apply mt-3 inline-flex items-center gap-1.5 rounded-lg border border-blue-500/20
                         bg-blue-500/10 px-3 py-1.5 text-xs font-semibold text-blue-600
                         transition hover:-translate-y-0.5 hover:border-blue-500 hover:bg-blue-500/15; }

  /* Card contenedor: respira un poco m√°s y se centra mejor en desktop */
  .form-card { @apply max-w-[720px] p-12 sm:p-10; }
}

/* Si usas el ‚Äúbadge‚Äù derecho en el JSX, esto te ayuda a alinear */
@layer utilities {
  .form-row        { @apply flex items-center justify-between gap-3; }
  .form-row-center { @apply flex items-center gap-4; }
}

/* ===== Fix: iconos dentro de los inputs ===== */
@layer components {
  /* Asegura contenedor relativo */
  .input-container { @apply relative; }

  /* Coloca el icono centrado vertical y con pointer-events:none */
  .input-container .input-icon {
    @apply absolute left-3 top-1/2 -translate-y-1/2 z-10 text-slate-400;
    pointer-events: none;
    font-size: 1.125rem; /* 18px */
    line-height: 1;
  }

  /* Empuja el texto del input a la derecha para que no se cruce con el icono */
  .input-container > .form-input {
    @apply pl-12; /* 3rem ‚âà icono + margen */
  }

  /* Si usas inputs muy grandes, puedes aumentar un poco en pantallas medianas+ */
  @media (min-width: 768px) {
    .input-container > .form-input { @apply pl-14; } /* opcional: 3.5rem */
  }
}

/* ==== FIX DEFINITIVO: icono y texto sin solaparse ==== */
@layer components {
  /* El wrapper debe ser relativo para posicionar bien el icono */
  .input-container { @apply relative; }

  /* Icono centrado vertical y sin capturar clics */
  .input-container .input-icon {
    @apply absolute top-1/2 -translate-y-1/2 text-slate-400 z-10;
    left: 0.875rem;            /* left-3 */
    width: 1.25rem;            /* 20px, para reservar bien el ancho */
    pointer-events: none;
    line-height: 1;
  }

  /* Aumentamos la especificidad y el padding izquierdo (4rem) */
  .input-container input.form-input,
  .input-container input[type="text"],
  .input-container input[type="email"],
  .input-container input[type="url"],
  .input-container input[type="search"],
  .input-container input[type="password"] {
    @apply pl-16;              /* 4rem = 64px, suficiente para icono + margen */
  }

  /* Si en m√≥viles quieres un poco menos, baja a 3.5rem */
  @media (max-width: 480px) {
    .input-container input.form-input,
    .input-container input[type="text"],
    .input-container input[type="email"],
    .input-container input[type="url"],
    .input-container input[type="search"],
    .input-container input[type="password"] {
      @apply pl-14;            /* 3.5rem = 56px */
    }
  }
}
/* ===== FIX: inputs con iconos (sin solaparse) ===== */
@layer components {
  /* El wrapper debe ser el relativo */
  .input-container { position: relative; }

  /* Icono: mismo alto/centrado, sin capturar clics */
  .input-container .input-icon {
    position: absolute;
    left: 0.875rem;                  /* ~14px */
    top: 50%;
    transform: translateY(-50%);
    width: 1.25rem;                  /* 20px */
    height: 1.25rem;
    line-height: 1;
    color: rgb(148 163 184);         /* slate-400 */
    pointer-events: none;
    z-index: 10;
  }

  /* Asegura espacio a la izquierda del texto */
  /* 1) selector normal (deber√≠a bastar) */
  .input-container .form-input {
    padding-left: 3.75rem !important; /* 60px aprox: icono + margen */
  }

  /* 2) si tu build genera reglas muy espec√≠ficas, refuerzo extra */
  .input-container input.form-input,
  .input-container input[type="text"].form-input,
  .input-container input[type="email"].form-input,
  .input-container input[type="url"].form-input,
  .input-container input[type="search"].form-input,
  .input-container input[type="password"].form-input {
    padding-left: 3.75rem !important;
  }

  /* 3) bonus: si el navegador soporta :has, todav√≠a m√°s robusto */
  .input-container:has(.input-icon) .form-input { padding-left: 3.75rem !important; }

  /* Ajuste en m√≥viles (un poco menos de padding si lo prefieres) */
  @media (max-width: 480px) {
    .input-container .form-input { padding-left: 3.5rem !important; }
  }
}
/* ===== Ajuste fino: bajar un poco los iconos de los inputs ===== */
@layer components {
  /* Baja ~3px respecto al centro √≥ptico */
  .input-container .input-icon {
    top: calc(80% + 3px) !important;   /* sube/baja cambiando el 3 */
    transform: translateY(-50%);
  }

  /* En m√≥viles, un pel√≠n menos de desplazamiento */
  @media (max-width: 480px) {
    .input-container .input-icon {
      top: calc(10% + 2px) !important;
    }
  }
}
